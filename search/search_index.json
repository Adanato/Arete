{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to Arete","text":"<p>Arete is a robust, fast, and feature-rich tool designed to synchronize your Obsidian vault to Anki.</p> <p> </p> <p>It adheres to a strict One-Way Sync philosophy: Obsidian is the Source of Truth.</p> <p>[!NOTE]  Arete v2.0: This version introduces advanced features like Topological Study Queues and FSRS-based difficulty analysis.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>\u26a1 Near-Instant Sync: SQL-based caching ensures only changed files are re-processed.</li> <li>\ud83d\udcd0 Topological Sort: Automatically creates Anki decks that respect prerequisite relationships.</li> <li>\ud83e\uddec FSRS Support: Analyzes difficulty and retention using modern scheduling data.</li> <li>\ud83e\uddf9 Prune Mode: Automatically deletes Anki cards that no longer exist in your vault.</li> <li>\ud83e\ude79 Self-Healing: Detects and fixes lost IDs or duplicate cards without manual intervention.</li> <li>\ud83d\udcf8 Media Sync: Seamlessly syncs images and attachments.</li> <li>\ud83d\udcbb Cross-Platform: First-class support for macOS, Linux, and Windows (WSL).</li> </ul>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li>CLI Guide: Command-line usage, configuration, and syntax.</li> <li>Obsidian Plugin: How to use the companion Obsidian plugin.</li> <li>Architecture: Deep dive into the project internals.</li> <li>Troubleshooting: Solutions for common networking and sync issues.</li> <li>Contributing: Guide for developers wanting to help out.</li> </ul>"},{"location":"#installation","title":"Installation","text":"<pre><code>git clone https://github.com/Adanato/Arete\ncd obsidian_2_anki\nuv sync\n</code></pre>"},{"location":"#basic-usage","title":"Basic Usage","text":"<ol> <li> <p>Initialize your vault config:     <pre><code>uv run arete init\n</code></pre></p> </li> <li> <p>Sync your notes:     <pre><code>uv run arete sync\n</code></pre></p> </li> <li> <p>Migrate (if coming from v1):     <pre><code>uv run arete migrate\n</code></pre></p> </li> </ol>"},{"location":"ANKI_PLUGIN/","title":"Arete Anki Add-on","text":"<p>The Arete Anki Add-on (<code>arete_ankiconnect</code>) is a specialized bridge that allows the Arete CLI and Obsidian Plugin to communicate directly with your running Anki instance.</p>"},{"location":"ANKI_PLUGIN/#why-is-this-needed","title":"Why is this needed?","text":"<p>[!WARNING] This add-on replaces the standard AnkiConnect. Do NOT install both at the same time, or they will conflict on port 8765.</p> <p>While Arete can sync notes directly to the Anki database (using <code>AnkiDirectAdapter</code>), many of the real-time features require Anki to be open. The add-on provides a REST API that enables:</p> <ul> <li>Live Hover Previews: See your card content in Obsidian without switching apps.</li> <li>Statistical Analytics: Fetch real-time retention and lapse data.</li> <li>GUI Integration: Automatically open the Anki Browser to a specific note from Obsidian.</li> </ul>"},{"location":"ANKI_PLUGIN/#installation","title":"Installation","text":""},{"location":"ANKI_PLUGIN/#manual-installation","title":"Manual Installation","text":"<ol> <li>Download the repository or the release artifact.</li> <li>Open Anki.</li> <li>Go to <code>Tools</code> -&gt; <code>Add-ons</code>.</li> <li>Click <code>View Files</code>. This opens your Anki add-ons folder.</li> <li>Copy the <code>arete_ankiconnect</code> folder from this repository into the add-ons folder.</li> <li>Restart Anki.</li> </ol>"},{"location":"ANKI_PLUGIN/#for-developers-auto-push","title":"For Developers (Auto-Push)","text":"<p>To have your changes reflect immediately in Anki (upon restart) without copying files manually, use a Symbolic Link.</p> <p>Mac / Linux: Run this from the project root: <pre><code># Remove existing folder if present\nrm -rf \"$HOME/Library/Application Support/Anki2/addons21/arete_ankiconnect\"\n\n# Create Symlink\nln -s \"$(pwd)/arete_ankiconnect\" \"$HOME/Library/Application Support/Anki2/addons21/arete_ankiconnect\"\n</code></pre></p> <p>Windows (PowerShell): <pre><code>New-Item -ItemType SymboliCLink -Path \"$env:APPDATA\\Anki2\\addons21\\arete_ankiconnect\" -Target \"$(Get-Location)\\arete_ankiconnect\"\n</code></pre></p>"},{"location":"ANKI_PLUGIN/#configuration","title":"Configuration","text":"<p>The add-on listens on port <code>8765</code> by default. You can change this in the <code>config.json</code> file within the add-on directory if needed.</p> <pre><code>{\n    \"apiKey\": null,\n    \"apiPort\": 8765,\n    \"apiLogPath\": null\n}\n</code></pre>"},{"location":"ANKI_PLUGIN/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Port Conflict: Ensure no other application (like the original AnkiConnect) is using port <code>8765</code>.</li> <li>Anki Not Running: The add-on only works while Anki is open.</li> <li>Firewall: Ensure your local firewall allows connections to port <code>8765</code>.</li> </ul>"},{"location":"ARCHITECTURE/","title":"Project Architecture","text":"<p><code>arete</code> follows a modular Domain-Driven Design (DDD) approach. The code is organized into layers, separating core domain logic from application services and infrastructure adapters.</p>"},{"location":"ARCHITECTURE/#directory-structure","title":"Directory Structure","text":"<pre><code>src/arete/               # Core Python Logic\n\u251c\u2500\u2500 domain/             # Data Structures &amp; Interfaces\n\u2502   \u251c\u2500\u2500 types.py        # Core data classes (AnkiNote, AnkiDeck, AnkiCard)\n\u2502   \u2514\u2500\u2500 interfaces.py   # Abstract Base Classes (AnkiBridge)\n\u2502\n\u251c\u2500\u2500 application/        # Business Logic &amp; Orchestration\n\u2502   \u251c\u2500\u2500 pipeline.py     # Main sync orchestration layer\n\u2502   \u251c\u2500\u2500 queue_builder.py # Topological resolution &amp; study queues\n\u2502   \u251c\u2500\u2500 parser.py       # Markdown -&gt; Anki transformation logic\n\u2502   \u2514\u2500\u2500 vault_service.py # Obsidian vault crawler &amp; ID management\n\u2502\n\u251c\u2500\u2500 infrastructure/     # External Adapters &amp; Data Persistence\n\u2502   \u251c\u2500\u2500 adapters/       # AnkiBridge implementations (Direct, Connect, Apy)\n\u2502   \u2514\u2500\u2500 repository.py   # Low-level DB / FS interactions\n\u2502\n\u251c\u2500\u2500 interface/          # User Entry Points\n\u2502   \u251c\u2500\u2500 cli.py          # Click-based Command Line Interface\n\u2502   \u2514\u2500\u2500 server.py       # FastAPI-based persistence server\n\u2502\n\u2514\u2500\u2500 main.py             # Global entry point\n\nobsidian-plugin/        # Obsidian GUI\n\u251c\u2500\u2500 src/                # TypeScript source files\n\u2502   \u251c\u2500\u2500 application/    # Frontend services (Sync, Stats, Graph)\n\u2502   \u251c\u2500\u2500 infrastructure/ # API clients (AreteClient)\n\u2502   \u2514\u2500\u2500 presentation/   # UI Components &amp; Views (Gutter, QueueBuilder)\n\u2514\u2500\u2500 styles.css          # Core UI styling\n</code></pre>"},{"location":"ARCHITECTURE/#cli-vs-plugin","title":"CLI vs Plugin","text":"<ul> <li>CLI: Handles all the heavy lifting\u2014scanning files, hashing content, communicating with AnkiConnect, and writing IDs back to Markdown.</li> <li>Plugin: Provides a settings page in Obsidian and a simple \"Sync\" ribbon icon. When clicked, it spawns a child process to run <code>arete sync</code> and captures the output to display in a modal.</li> </ul> <p>This split ensures that advanced users can automate syncs via crontab or shell scripts, while causal users get a seamless integrated experience.</p>"},{"location":"ARCHITECTURE/#the-pipeline","title":"The Pipeline","text":"<p>The application runs in 5 distinct stages, orchestrated by <code>core/pipeline.py</code>:</p> <ol> <li> <p>Scanning (<code>VaultService</code>):</p> <ul> <li>Walks the directory tree.</li> <li>Checks <code>ContentCache</code> (MD5 hash) to see if a file needs processing.</li> <li>Returns a list of compatible markdown files.</li> </ul> </li> <li> <p>Media Indexing (<code>media.py</code>):</p> <ul> <li>Builds a global filename index of all common attachment folders (e.g., <code>attachments</code>, <code>assets</code>).</li> <li>Enables resolving wikilinks and markdown images without needing full paths.</li> </ul> </li> <li> <p>Async Processing (Producer/Consumer pairing):</p> <ul> <li>Producers (<code>Parsing</code>): Parse Markdown, calculate content hashes, and transform media links.</li> <li>Consumers (<code>Syncing</code>): Multi-threaded sync to Anki (via AnkiConnect or <code>apy</code>). </li> <li>Caching happens here: If a card's content hash matches the cache, it's skipped.</li> </ul> </li> <li> <p>ID Write-back (<code>VaultService</code>):</p> <ul> <li>Writes assigned <code>nid</code> (Note ID) and <code>cid</code> (Card ID) back to the Markdown frontmatter.</li> <li>Ensures future runs track existing cards correctly.</li> </ul> </li> <li> <p>Pruning:</p> <ul> <li>Calculates the set difference between \"All IDs in Vault\" vs \"All IDs in Anki\".</li> <li>Deletes Anki notes and decks that no longer exist in Obsidian (if <code>--prune</code> is enabled).</li> </ul> </li> </ol>"},{"location":"ARCHITECTURE/#key-design-decisions","title":"Key Design Decisions","text":""},{"location":"ARCHITECTURE/#1-filesystem-based-media-sync","title":"1. Filesystem-Based Media Sync","text":"<p>Unlike note syncing which uses an API, Media Sync is filesystem-based. <code>arete</code> copies images directly from your vault into Anki's <code>collection.media</code> folder.  *   Implication: The CLI must have write access to the Anki media directory. *   Uniqueness: Files are hashed to avoid duplicates (e.g., <code>image.png</code> becomes <code>image_a1b2c3d4.png</code>).</p>"},{"location":"ARCHITECTURE/#2-obsidian-as-source-of-truth","title":"2. Obsidian as Source of Truth","text":"<p>The system is designed to be Stateless regarding logic. The state lives in Obsidian (text) and Anki (reviews). <code>arete</code> is just the bridge. We write IDs back to Obsidian so it \"owns\" the link to the card.</p>"},{"location":"ARCHITECTURE/#3-wsl-compatibility","title":"3. WSL Compatibility","text":"<p><code>anki_connect.py</code> contains specific logic to detect WSL environments. *   Problem: WSL's <code>localhost</code> != Windows <code>localhost</code>. *   Solution: It attempts to find <code>curl.exe</code> (Windows binary) accessible from Linux and uses it as a bridge to communicate with Anki on the host.</p>"},{"location":"ARCHITECTURE/#3-caching","title":"3. Caching","text":"<p><code>infrastructure/cache.py</code> maintains a lightweight SQLite database of file hashes. This allows the tool to run in milliseconds for unchanged vaults, only processing what you've actually edited.</p>"},{"location":"ARCHITECTURE/#development-stack","title":"Development Stack","text":"<p><code>arete</code> is built with a focus on developer velocity and code quality:</p> <ul> <li>Package Management: <code>uv</code> for lightning-fast dependency resolution and isolated environments.</li> <li>Task Automation: <code>just</code> (via <code>justfile</code>) replaces complex Makefiles for common tasks (test, lint, docker).</li> <li>Code Quality: <code>ruff</code> for linting and formatting, ensuring a 100% clean codebase with modern Python rules.</li> <li>Testing: <code>pytest</code> for unit/service tests, and a Dockerized Anki environment for end-to-end integration tests.</li> </ul>"},{"location":"ARCHITECTURE/#convenience-features","title":"Convenience Features","text":"<ul> <li><code>debug_anki.py</code>: A specialized diagnostic tool to verify connectivity between the CLI and Anki (handles WSL/Networking edge cases).</li> <li>Self-Healing: Automatic recovery from \"Duplicate\" errors by adopting existing NIDs, making it robust against manual edits in Anki.</li> <li>Integrated Logs: Use <code>arete --open-logs</code> to quickly access detailed execution logs for debugging.</li> </ul>"},{"location":"ARCHITECTURE/#logging-reporting","title":"Logging &amp; Reporting","text":"<p>Every execution of <code>arete</code> is fully audited:</p> <ol> <li>Console Output: Clean and high-level, with verbosity controlled by <code>-v</code>.</li> <li>Debug Logs: A comprehensive log file (<code>run_*.log</code>) is generated in <code>~/.config/arete/logs/</code> for every run, capturing full stack traces and internal transitions.</li> <li>Run Reports: <code>logging_utils.py</code> generates a human-readable Markdown report (<code>report_*.md</code>) for every sync, providing stats on files scanned, cards updated, and specific error tables.</li> </ol>"},{"location":"CLI/","title":"Arete CLI Guide","text":"<p>This guide covers the advanced usage, configuration, and syntax for the <code>arete</code> command-line tool.</p>"},{"location":"CLI/#installation","title":"Installation","text":"<p><code>arete</code> uses uv for lightning-fast dependency management and isolated environments.</p> <pre><code>git clone https://github.com/Adanato/Arete\ncd obsidian_2_anki\nuv sync\n</code></pre>"},{"location":"CLI/#commands-reference","title":"Commands Reference","text":"Command Description <code>arete init</code> Initialize a new vault configuration. <code>arete sync</code> Standard sync from Obsidian to Anki. <code>arete sync --prune</code> Sync and delete notes in Anki that were removed from Obsidian. <code>arete sync --force</code> Bypass cache and force re-processing of all files. <code>arete migrate</code> (v2.0) Upgrade a v1.x vault and configuration to v2.0 standards. <code>arete server</code> (v2.0) Start a persistent FastAPI server for faster plugin interaction. <code>arete queue build</code> (v2.0) Generate an ordered study queue based on concept dependencies. <code>arete config show</code> View current resolved configuration. <code>arete logs</code> Open the run logs directory."},{"location":"CLI/#advanced-sync-options","title":"Advanced Sync Options","text":"<ul> <li><code>--dry-run</code>: Preview changes without applying to Anki.</li> <li><code>--clear-cache</code>: Wipe the local SQLite cache and force re-sync.</li> <li><code>--keep-going</code>: Continue processing even if individual notes error out.</li> </ul>"},{"location":"CLI/#topological-sort-queues-v20","title":"Topological Sort &amp; Queues (v2.0)","text":"<p>Arete v2.0 supports dependency-aware study queues. By tagging notes with prerequisites, you can generate filtered decks in Anki that ensure you learn concepts in the correct order.</p> <pre><code>uv run arete queue build --concepts \"Heart\" \"Valves\" --create-deck\n</code></pre>"},{"location":"CLI/#persistence-server","title":"Persistence Server","text":"<p>The <code>server</code> command starts a local API that the Obsidian plugin uses for near-instant interaction (hover previews, metadata checks).</p> <pre><code>uv run arete server --port 8080\n</code></pre>"},{"location":"CLI/#configuration-configareteconfigtoml","title":"Configuration (<code>~/.config/arete/config.toml</code>)","text":"<pre><code>root_input = \"/path/to/vault\"\nanki_media_dir = \"/path/to/anki/collection.media\"\nbackend = \"ankiconnect\"  # 'ankiconnect' or 'apy'\nprune = false\n</code></pre> <p>[!IMPORTANT] WSL Media Sync: If you are using WSL, ensure your Anki media directory is a regular Windows path that <code>arete</code> can resolve (e.g., <code>/mnt/c/Users/.../collection.media</code>).</p>"},{"location":"CONTRIBUTING/","title":"Contributing to arete","text":"<p>We follow a structured, iterative development process. Our goal is to make small, atomic changes and verify them completely before moving to the next task.</p>"},{"location":"CONTRIBUTING/#development-lifecycle","title":"\ud83d\ude80 Development Lifecycle","text":"<ol> <li>Pick a Task: Focus on a single issue or feature at a time.</li> <li>Atomic Implementation: Make the smallest necessary change to achieve the goal.</li> <li>Verify Immediately: Run tests and linters before committing.</li> <li>Merge &amp; Iterate: Keep branches short-lived.</li> </ol>"},{"location":"CONTRIBUTING/#branching-strategy","title":"\ud83c\udf3f Branching Strategy","text":"<p>We follow a standard Feature Branch Workflow:</p> <ul> <li><code>main</code>: Production-ready code. Always stable.</li> <li><code>feat/name</code>: New features (e.g., <code>feat/anki-connect-url</code>).</li> <li><code>fix/issue</code>: Bug fixes (e.g., <code>fix/windows-path-bug</code>).</li> <li><code>chore/task</code>: Maintenance (e.g., <code>chore/ci-pipeline</code>).</li> </ul> <p>Rule: Never push directly to <code>main</code>. Open a Pull Request for every change.</p>"},{"location":"CONTRIBUTING/#setup","title":"\ud83d\udee0 Setup","text":"<p>We use <code>uv</code> for Python dependency management and <code>just</code> for task automation. For the Obsidian plugin, we use <code>npm</code>.</p>"},{"location":"CONTRIBUTING/#1-install-dependencies","title":"1. Install Dependencies","text":"<pre><code># Python &amp; CLI\nuv sync\nuv run pre-commit install\n\n# Obsidian Plugin\ncd obsidian-plugin\nnpm install\ncd ..\n</code></pre>"},{"location":"CONTRIBUTING/#verification-the-gold-standard","title":"\u2705 Verification (The \"Gold Standard\")","text":"<p>Before submitting any code, you must ensure the entire project is healthy. We have a single command for this:</p> <p><pre><code>just check\n</code></pre> This command runs: - Python Formatting (<code>ruff format</code>) - Python Linting (<code>ruff check</code>) - Python Tests (<code>pytest</code>) - TypeScript Linting (<code>npm run lint</code>) - TypeScript Tests (<code>npm test</code>)</p> <p>If <code>just check</code> passes, your code is ready.</p>"},{"location":"CONTRIBUTING/#workflow-commands","title":"\u26a1 Workflow Commands","text":""},{"location":"CONTRIBUTING/#python-cli","title":"Python / CLI","text":"Task Command Description Lint &amp; Format <code>just lint</code> Run Ruff to check and format code. Fix Issues <code>just fix</code> Auto-fix Python linting errors. Type Check <code>just check-types</code> Run static type checking. Unit Tests <code>just test</code> Run fast unit tests. Integration <code>just test-integration</code> Run E2E tests (requires Docker)."},{"location":"CONTRIBUTING/#testing-strategy","title":"\ud83e\uddea Testing Strategy","text":"<p>Every feature or fix must be accompanied by tests.</p>"},{"location":"CONTRIBUTING/#1-python-unit-tests-tests","title":"1. Python Unit Tests (<code>tests/</code>)","text":"<ul> <li>Location: Mirror the <code>src/arete</code> structure (e.g., <code>src/arete/core/pipeline.py</code> -&gt; <code>tests/core/test_pipeline.py</code>).</li> <li>Scope: Test individual functions and classes. Mock external dependencies (like Anki).</li> <li>Tool: <code>pytest</code>.</li> </ul>"},{"location":"CONTRIBUTING/#2-python-integration-tests-testsintegration","title":"2. Python Integration Tests (<code>tests/integration/</code>)","text":"<ul> <li>Location: <code>tests/integration/</code>.</li> <li>Scope: End-to-end flows against a real Anki instance (dockerized).</li> <li>Rule: Only add here if you need to verify actual Anki communication. Use specialized markers if needed.</li> </ul>"},{"location":"CONTRIBUTING/#3-plugin-tests-obsidian-plugintests","title":"3. Plugin Tests (<code>obsidian-plugin/tests/</code>)","text":"<ul> <li>Location: <code>obsidian-plugin/tests/</code>.</li> <li>Scope: Test UI logic, settings parsing, and command invocation.</li> <li>Mocking: We use a <code>k</code> mock for Obsidian's API (App, Notice, FileSystem).</li> </ul>"},{"location":"CONTRIBUTING/#4-definition-of-done","title":"4. Definition of Done","text":"<p>Your task is done when: - [ ] You have added a test case that replicates the bug (for fixes) or verifies the feature. - [ ] <code>just test</code> passes (Unit). - [ ] <code>just check</code> passes (Full Suite). - [ ] You have verified the UX manually (for Plugin changes).</p>"},{"location":"CONTRIBUTING/#obsidian-plugin","title":"Obsidian Plugin","text":"Task Command Description Build <code>npm run build</code> Compile TypeScript to <code>main.js</code>. Test <code>npm test</code> Run Jest unit tests. Lint <code>npm run lint</code> Run ESLint."},{"location":"CONTRIBUTING/#documentation","title":"Documentation","text":"Task Command Description Deploy <code>just deploy-docs</code> Build and deploy MkDocs to GitHub Pages."},{"location":"CONTRIBUTING/#architecture-design","title":"\ud83c\udfd7 Architecture &amp; Design","text":"<ul> <li>One-Way Sync: Obsidian is the source of truth. We push to Anki, we do not pull back.</li> <li>Plugin vs CLI: The Plugin wraps the CLI. Keep complex logic in the CLI (<code>arete.main</code>) where it can be tested easily. The Plugin should primarily handle UI and process orchestration.</li> </ul> <p>Please review ARCHITECTURE.md for deeper system design details.</p>"},{"location":"PLUGIN/","title":"Arete Plugin Guide","text":"<p>The Arete Obsidian Plugin provides a rich graphical interface for synchronization, health analysis, and study queue generation.</p>"},{"location":"PLUGIN/#installation","title":"Installation","text":"<ol> <li>Download the latest <code>main.js</code>, <code>manifest.json</code>, and <code>styles.css</code> from GitHub Releases.</li> <li>Create a folder: <code>&lt;Vault&gt;/.obsidian/plugins/arete</code>.</li> <li>Place the 3 files into that folder and enable the plugin in Obsidian settings.</li> </ol>"},{"location":"PLUGIN/#core-features","title":"Core Features","text":""},{"location":"PLUGIN/#intelligent-sync","title":"\ud83d\udd04 Intelligent Sync","text":"<ul> <li>Automatic Sync: Enabling \"Sync on Save\" in settings pushes changes to Anki as you type.</li> <li>Manual Sync: Click the Sync icon in the ribbon or use <code>Mod+Shift+A</code>.</li> <li>Prune Mode: Removes cards from Anki that no longer exist in your vault.</li> </ul>"},{"location":"PLUGIN/#card-health-gutter","title":"\ud83e\uddec Card Health &amp; Gutter","text":"<p>The Card Gutter (enabled by default) adds visual indicators next to your notes: - Index Number: Shows the card's position in the current file. - Retention Status: Colored badges for \"High\", \"Med\", or \"Low\" retention based on Anki FSRS/SM-2 data. - Lapse Counter: Identifies \"Leech\" cards that need attention.</p>"},{"location":"PLUGIN/#queue-builder-v20","title":"\ud83d\udcd0 Queue Builder (v2.0)","text":"<p>Generate custom Anki Filtered Decks that respect your knowledge graph: 1.  Open the Queue Builder from the command palette. 2.  Select the concepts/notes you want to study. 3.  Click Build Queue to see the topologically sorted list. 4.  Click Create Anki Deck to generate a study-ready deck in Anki.</p>"},{"location":"PLUGIN/#dependency-management","title":"\ud83d\udd17 Dependency Management","text":"<p>Manage prerequisites directly in your notes: - Hover Preview: Hover over any note ID or heading to see a preview of the card content. - Graph Integration: Right-click nodes in the local graph to add/remove dependencies.</p>"},{"location":"PLUGIN/#settings-configuration","title":"Settings Configuration","text":"<ul> <li>Execution Mode: <ul> <li><code>CLI</code>: Spawns a process for each action (Classic).</li> <li><code>Server</code>: Connects to a persistent background server (Recommended for near-instant UI).</li> </ul> </li> <li>Python Path: Path to your <code>python3</code> or <code>arete</code> executable.</li> <li>Project Root: Path to your <code>obsidian_2_anki</code> folder (required for <code>uv</code> support).</li> <li>Parallel Workers: Adjust based on your CPU for faster syncs.</li> </ul>"},{"location":"PLUGIN/#troubleshooting","title":"Troubleshooting","text":"<ul> <li>Logs: Check the developer console (Cmd+Option+I) or the local <code>run_*.log</code> files for sync errors.</li> <li>Environment: Use the \"Test\" button in settings to verify your Python environment is ready.</li> </ul>"},{"location":"publishing/","title":"Publishing Guide","text":"<p>This guide is for maintainers of the Arete project.</p>"},{"location":"publishing/#part-1-pypi-the-python-package","title":"Part 1: PyPI (The Python Package)","text":""},{"location":"publishing/#1-check-if-it-exists","title":"1. Check if it exists","text":"<p>Go to: https://pypi.org/project/arete/ If you see a 404, it is NOT published yet.</p>"},{"location":"publishing/#2-how-to-publish","title":"2. How to Publish","text":"<p>You need to upload the artifacts built in <code>dist/</code>.</p> <ol> <li>Create Account: Register on PyPI.</li> <li>Get Token: Account Settings -&gt; API Tokens -&gt; Add API Token (Scope: Entire Account).</li> <li>Run Command:     <pre><code>uv publish\n</code></pre><ul> <li>Username: <code>__token__</code></li> <li>Password: <code>pypi-AgEIpy...</code> (Your full token)</li> </ul> </li> </ol> <p>Once successful, <code>pip install arete</code> will work for everyone.</p>"},{"location":"publishing/#part-2-github-actions-cicd","title":"Part 2: GitHub Actions (CI/CD)","text":"<p>The project uses GitHub Actions to automate testing and releases.</p> <ul> <li>Test Workflow: Runs on every PR and push to <code>main</code>. It executes <code>pytest</code> (with Dockerized Anki) and <code>ruff</code>.</li> <li>Release Workflow: Triggered when a new GitHub Tag is pushed (e.g., <code>v1.0.0</code>).<ul> <li>Automatically builds the Python <code>dist/</code> artifacts.</li> <li>Automatically builds the Obsidian Plugin (<code>main.js</code>, <code>manifest.json</code>, <code>styles.css</code>).</li> <li>Attaches all binaries to the GitHub Release.</li> <li>(Optional) Pushes to PyPI if Trusted Publishing is configured.</li> </ul> </li> </ul>"},{"location":"publishing/#part-3-obsidian-community-plugins","title":"Part 3: Obsidian Community Plugins","text":"<p>To get your plugin into the official list inside Obsidian, you must submit a Pull Request to the Obsidian team.</p>"},{"location":"publishing/#prerequisites","title":"Prerequisites","text":"<ol> <li>GitHub Release: You must have a published Release with <code>main.js</code>, <code>manifest.json</code>, and <code>styles.css</code> attached.</li> <li>Repo Structure: <code>manifest.json</code> must be at the root of the repo (or root of released files). Note: We release from <code>obsidian-plugin/</code>, but the build process handles the file placement.</li> </ol>"},{"location":"publishing/#submission-steps","title":"Submission Steps","text":"<ol> <li>Fork the obsidian-releases repository.</li> <li>Add Entry: Add your plugin to <code>community-plugins.json</code> in their repo.<ul> <li>Format:     <pre><code>{\n  \"id\": \"arete\",\n  \"name\": \"Arete\",\n  \"author\": \"Adam Nguyen\",\n  \"description\": \"Sync Obsidian vault to Anki with topological queues and FSRS support.\",\n  \"repo\": \"Adanato/Arete\"\n}\n</code></pre></li> </ul> </li> <li>Submit PR: Open a Pull Request on their repo.</li> </ol>"},{"location":"publishing/#part-4-versioning-strategy","title":"Part 4: Versioning Strategy","text":"<p>We follow Semantic Versioning (SemVer): <code>MAJOR.MINOR.PATCH</code>.</p> <ul> <li>MAJOR: Breaking changes (e.g., changes to the Markdown card syntax).</li> <li>MINOR: New features (e.g., support for a new Anki field type).</li> <li>PATCH: Bug fixes and documentation updates.</li> </ul> <p>Always update <code>version</code> in <code>pyproject.toml</code> and <code>manifest.json</code> simultaneously to keep the CLI and Plugin in sync.</p>"},{"location":"publishing/#part-5-ankiweb-add-on-store","title":"Part 5: AnkiWeb (Add-on Store)","text":""},{"location":"publishing/#part-5-ankiweb-add-on-store_1","title":"Part 5: AnkiWeb (Add-on Store)","text":"<p>Publishing to AnkiWeb is currently a manual process.</p> <ol> <li>Download the Artifact: Go to the GitHub Release you just created (e.g., <code>v2.0.0</code>) and download <code>arete_ankiconnect.zip</code>.</li> <li>Rename: Rename the file to <code>arete_ankiconnect.ankiaddon</code> if it isn't already (GitHub Actions artifact downloads sometimes strip extensions).</li> <li>Upload:<ul> <li>Go to AnkiWeb Shared Add-ons.</li> <li>Click Upload.</li> <li>Select the file.</li> <li>Update the description if necessary.</li> </ul> </li> </ol> <p>(Note: Automated publishing is disabled due to the lack of a reliable public uploading tool.)</p>"},{"location":"publishing/#part-6-brat-beta-testing-distribution","title":"Part 6: BRAT (Beta Testing Distribution)","text":"<p>The BRAT (Beta Reviewers Auto-update Tool) plugin allows users to install Obsidian plugins directly from GitHub before they are officially published.</p>"},{"location":"publishing/#how-it-works","title":"How it works","text":"<p>BRAT looks for the released artifacts (<code>main.js</code>, <code>manifest.json</code>, <code>styles.css</code>) in your GitHub Releases. Since our CI/CD pipeline already attaches these files to every release, Arete is native-BRAT compatible out of the box.</p>"},{"location":"publishing/#instructions-for-users","title":"Instructions for Users","text":"<p>To test the pre-release version of Arete: 1.  Install the BRAT plugin from the Obsidian Community Store. 2.  Open BRAT settings -&gt; \"Add Beta plugin\". 3.  Enter the repository URL: <code>https://github.com/Adanato/Arete</code>. 4.  BRAT will download the latest release and keep it auto-updated.</p>"},{"location":"publishing/#important-for-maintainers","title":"Important for Maintainers","text":"<ul> <li>Ensure the <code>manifest.json</code> version matches the GitHub Release tag.</li> <li>Do not change the filenames of the attached binaries (<code>main.js</code>, etc.). BRAT expects these exact names.</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting Guide","text":"<p>This guide covers common issues encountered while using ObsiAnki (arete) and how to resolve them.</p>"},{"location":"troubleshooting/#1-connection-issues-ankiconnect","title":"1. Connection Issues (AnkiConnect)","text":"<p>If the sync fails with a \"Cannot connect to Anki\" error:</p> <ul> <li>Is Anki running?: Anki must be open for the sync to work.</li> <li>AnkiConnect installed?: Ensure you have the AnkiConnect add-on installed in Anki.</li> <li>Port Binding: By default, AnkiConnect listens on <code>127.0.0.1:8765</code>. </li> <li>Allowed Origins: In Anki, go to <code>Tools -&gt; Add-ons -&gt; AnkiConnect -&gt; Config</code> and ensure your origin is allowed. For arete, adding <code>*</code> to <code>webBindAddress</code> (if needed) or ensuring <code>localhost</code> is in <code>webCorsOriginList</code> helps.</li> </ul>"},{"location":"troubleshooting/#2-wsl-windows-subsystem-for-linux","title":"2. WSL (Windows Subsystem for Linux)","text":"<p>WSL users often face networking hurdles because WSL 2 uses a virtualized network.</p> <ul> <li>The <code>curl.exe</code> Bridge: <code>arete</code> attempts to use <code>curl.exe</code> (the Windows host binary) to communicate with Anki running on Windows. Ensure <code>curl.exe</code> is in your Windows PATH and accessible from WSL.</li> <li>Firewall: Ensure Windows Firewall isn't blocking incoming connections to port 8765.</li> </ul>"},{"location":"troubleshooting/#3-python-environment-uv","title":"3. Python Environment (<code>uv</code>)","text":"<ul> <li><code>Command not found: arete</code>: Ensure you are running commands with <code>uv run arete</code> or that your virtual environment is activated.</li> <li>Dependency Errors: Run <code>uv sync</code> to ensure all dependencies are correctly installed.</li> </ul>"},{"location":"troubleshooting/#4-sync-gaps-missing-cards","title":"4. Sync Gaps &amp; Missing Cards","text":"<ul> <li>\"File skipped\": If a file isn't syncing, check if it has the required frontmatter or tags (depending on your config).</li> <li>Cache Mismatch: If you suspect the cache is out of sync, you can force a re-scan by deleting the cache file:     <pre><code>rm ~/.config/arete/cache.db\n</code></pre> (Path may vary based on OS; use <code>arete config show</code> to find your config directory).</li> </ul>"},{"location":"troubleshooting/#5-locating-logs","title":"5. Locating Logs","text":"<p>When all else fails, check the logs. They contain detailed stack traces and internal logic transitions.</p> <pre><code>uv run arete --open-logs\n</code></pre> <p>This will open the directory containing your <code>run_*.log</code> files. Attach the latest log to any GitHub issue you open.</p>"},{"location":"plans/v2_0_0/","title":"Arete v2.0.0 \u2014 Implementation Plan","text":"<p>Dependency-aware learning built on top of Obsidian-authored cards and Anki scheduling.</p>"},{"location":"plans/v2_0_0/#core-design-principles","title":"Core Design Principles","text":"<ol> <li>Obsidian/YAML is the source of truth</li> <li>Each card has a single, stable Arete ID</li> <li>Anki IDs (nid/cid) are downstream mappings</li> <li>Dependencies are explicit and user-authored</li> <li>Anki schedules when; Arete guides what order makes sense</li> </ol>"},{"location":"plans/v2_0_0/#mental-model","title":"Mental Model","text":"<ul> <li>Concept Markdown</li> <li>Semantic container for one idea</li> <li>Groups related cards (facets of the same concept)</li> <li> <p>Optional concept-level dependencies (coarse)</p> </li> <li> <p>Card</p> </li> <li>Atomic review unit</li> <li> <p>Has:</p> <ul> <li>stable Arete ID</li> <li>content (fields)</li> <li>optional Anki mapping</li> <li>explicit dependencies on other cards</li> </ul> </li> <li> <p>Dependency Graph</p> </li> <li>Nodes = cards</li> <li>Edges:<ul> <li><code>requires</code> \u2192 prerequisite (ordering constraint)</li> <li><code>related</code> \u2192 associative (no ordering)</li> </ul> </li> </ul>"},{"location":"plans/v2_0_0/#1-schema-design-v2","title":"1. Schema Design (v2)","text":""},{"location":"plans/v2_0_0/#11-card-identity","title":"1.1 Card Identity","text":"<p>Each card owns a stable Arete ID, generated and managed automatically.</p> <pre><code>cards:\n  - id: arete_01JH8Y3ZK4QJ9W6E2N8F6M0P5R\n    model: Basic\n\n    Front: \"What is the horizon line?\"\n    Back: \"It represents the viewer\u2019s eye level.\"\n    deps:\n      requires: []\n      related: []\n    anki:\n      nid: 1701234567890\n      cid: 1701234567891\n</code></pre> <p>Invariants - <code>id</code> is required and never changes - Dependencies reference <code>id</code> - Anki IDs are optional mappings only</p>"},{"location":"plans/v2_0_0/#12-concept-markdown-container","title":"1.2 Concept Markdown (Container)","text":"<p>Concept notes group cards that probe the same idea from different angles.</p> <pre><code>concept:\n  title: \"Horizon Line\"\n  domain: art/perspective\n  deps:\n    requires:\n      - perspective_eye_level\n</code></pre> <p>Concept notes: - do not define review units - do not replace cards - exist to provide structure, navigation, and higher-level deps</p>"},{"location":"plans/v2_0_0/#13-dependency-semantics","title":"1.3 Dependency Semantics","text":"<pre><code>deps:\n  requires: [arete_xxx]   # must be understood first\n  related:  [arete_yyy]   # conceptually associated\n</code></pre> <p>Rules: - <code>requires</code> participates in learning order - <code>related</code> is non-ordering - cycles are allowed but flagged as co-requisites</p>"},{"location":"plans/v2_0_0/#14-migration-v1-v2","title":"1.4 Migration (v1 \u2192 v2)","text":"<p>Migration command: <pre><code>arete migrate v2\n</code></pre></p> <p>Steps: 1. Generate Arete ID for any card missing one 2. Normalize fields under <code>fields</code> 3. Preserve existing Anki mappings 4. Initialize empty <code>deps</code> if missing 5. Validate uniqueness of IDs</p> <p>Dry-run mode shows diff before write.</p>"},{"location":"plans/v2_0_0/#2-dependency-editing-ux","title":"2. Dependency Editing UX","text":""},{"location":"plans/v2_0_0/#21-dependency-panel-primary-editor","title":"2.1 Dependency Panel (Primary Editor)","text":"<p>A dedicated panel for the selected card.</p> <p>Features: - list <code>requires</code> and <code>related</code> - add/remove dependencies via search - show diagnostics:     - missing card     - cycle detected     - excessive prerequisites</p> <p>User never edits raw IDs manually.</p>"},{"location":"plans/v2_0_0/#22-add-dependency-flow","title":"2.2 Add Dependency Flow","text":"<ol> <li>User clicks \u201cAdd prerequisite\u201d or \u201cAdd related\u201d</li> <li>Fuzzy search across all cards</li> <li>Preview card content + location</li> <li>Insert referenced Arete ID into YAML</li> </ol>"},{"location":"plans/v2_0_0/#23-gutter-indicators-editor-feedback","title":"2.3 Gutter Indicators (Editor Feedback)","text":"<p>Per-card gutter markers: - \ud83d\udd17 has prerequisites - \u26a0\ufe0f missing prerequisite - \u2694\ufe0f cycle / co-requisite - \ud83c\udf31\ud83c\udf3f\ud83c\udf33 maturity (derived from Anki stats) - \ud83d\udd04 edited since last Anki sync</p>"},{"location":"plans/v2_0_0/#3-local-dependency-graph-view","title":"3. Local Dependency Graph View","text":""},{"location":"plans/v2_0_0/#31-scope","title":"3.1 Scope","text":"<p>Local subgraph centered on a selected card: - prerequisites (<code>requires</code>) - dependents (reverse <code>requires</code>) - related (optional toggle)</p> <p>Limits: - max depth (default: 2) - max nodes (default: 150)</p>"},{"location":"plans/v2_0_0/#32-layout","title":"3.2 Layout","text":"<p>Dependency-readable layout (not force blob): - left: prerequisites - center: selected card - right: dependents - dotted edges: related</p>"},{"location":"plans/v2_0_0/#33-interactions","title":"3.3 Interactions","text":"<ul> <li>click node \u2192 open note + scroll to card</li> <li>hover \u2192 preview + stats</li> <li>toggle requires / related</li> <li>highlight cycles and missing nodes</li> </ul>"},{"location":"plans/v2_0_0/#4-dependency-aware-anki-study-queues","title":"4. Dependency-Aware Anki Study Queues","text":""},{"location":"plans/v2_0_0/#41-role-separation","title":"4.1 Role Separation","text":"<ul> <li>Anki: scheduling (FSRS untouched)</li> <li>Arete: learning order and dependency health</li> </ul>"},{"location":"plans/v2_0_0/#42-todays-dependency-queue","title":"4.2 \u201cToday\u2019s Dependency Queue\u201d","text":"<p>Workflow: 1. Query Anki for due cards 2. Resolve prerequisite closure via <code>requires</code> 3. Identify weak prerequisites 4. Create temporary study queues:     - Arete \u2013 Today: Prereqs     - Arete \u2013 Today: Main 5. User studies prereqs first, then main.</p>"},{"location":"plans/v2_0_0/#43-weak-prerequisite-heuristics-v2","title":"4.3 Weak Prerequisite Heuristics (v2)","text":"<p>A prerequisite is \u201cweak\u201d if: - low stability - recent lapse - few total reviews - edited since last sync</p> <p>Thresholds configurable.</p>"},{"location":"plans/v2_0_0/#44-failure-handling","title":"4.4 Failure Handling","text":"<ul> <li>missing prereq \u2192 warn, continue</li> <li>cycles \u2192 treat group as bundle</li> <li>large closure \u2192 include only weakest K prereqs</li> </ul>"},{"location":"plans/v2_0_0/#5-indexing-performance","title":"5. Indexing &amp; Performance","text":"<p>Maintain card index: <code>id \u2192 file, position, deps, Anki mapping</code></p> <p>Rebuild on: - file changes - migration - explicit reindex command</p> <p>Dependency traversal is on-demand only</p>"},{"location":"plans/v2_0_0/#6-release-milestones","title":"6. Release Milestones","text":""},{"location":"plans/v2_0_0/#milestone-1-schema-migration-required","title":"Milestone 1 \u2014 Schema &amp; Migration (Required)","text":"<ul> <li>[ ] Arete ID generation</li> <li>[ ] v1 \u2192 v2 migration</li> <li>[ ] schema validation</li> </ul>"},{"location":"plans/v2_0_0/#milestone-2-dependency-editing-required","title":"Milestone 2 \u2014 Dependency Editing (Required)","text":"<ul> <li>[ ] dependency panel</li> <li>[ ] add/remove requires &amp; related</li> <li>[ ] diagnostics + gutter indicators</li> </ul>"},{"location":"plans/v2_0_0/#milestone-3-local-graph-view-v2-highlight","title":"Milestone 3 \u2014 Local Graph View (v2 Highlight)","text":"<ul> <li>[ ] local dependency graph</li> <li>[ ] navigation + toggles</li> </ul>"},{"location":"plans/v2_0_0/#milestone-4-anki-queue-builder-required","title":"Milestone 4 \u2014 Anki Queue Builder (Required)","text":"<ul> <li>[ ] prereq resolution</li> <li>[ ] filtered deck / tag-based queues</li> <li>[ ] summary report</li> </ul>"},{"location":"plans/v2_0_0/#milestone-5-docs-polish","title":"Milestone 5 \u2014 Docs &amp; Polish","text":"<ul> <li>[ ] schema documentation</li> <li>[ ] dependency modeling guide</li> <li>[ ] examples &amp; anti-patterns</li> </ul> <p>Note: Advanced Agentic features have been moved to v3.0.0 Plan.</p>"},{"location":"plans/v2_0_0/#7-modeling-guidelines-user-facing","title":"7. Modeling Guidelines (User-Facing)","text":"<ul> <li>Use <code>requires</code> sparingly (true prerequisites only)</li> <li>Use <code>related</code> for reinforcement and association</li> <li>If a card has too many prerequisites \u2192 split it</li> <li>Concept notes should group facets, not taxonomies</li> </ul>"},{"location":"plans/v2_0_0/#success-criteria","title":"Success Criteria","text":"<ul> <li>Cards can be linked before exporting to Anki</li> <li>Dependency graph survives re-imports</li> <li>Users can see why a card feels hard</li> <li>Learning order improves without fighting Anki\u2019s scheduler</li> </ul>"},{"location":"plans/v3_0_0/","title":"Arete v3.0.0 \u2014 The Agentic Layer","text":"<p>\"An intelligent interface that understands your capabilities.\"</p>"},{"location":"plans/v3_0_0/#core-vision","title":"Core Vision","text":"<p>Arete v3 shifts from being a \"dumb\" sync tool to an intelligent study partner. It sits on top of the robust v2 Python core and orchestrates it to help the user learn more effectively.</p> <p>Key Capabilities: 1.  Orchestrator Pattern: The Agent can chain multiple tools (Search \u2192 Analyze \u2192 Queue) to solve complex user requests. 2.  RAG (The Librarian): Full semantic understanding of the vault, not just Anki stats. 3.  Specialist Sub-Brains: Dedicated modules for \"Study Coaching\", \"Sync Architecture\", and \"Data Analytics\". 4.  Vision: Ability to \"see\" diagrams and images on cards to generate questions or check quality.</p>"},{"location":"plans/v3_0_0/#roadmap","title":"Roadmap","text":""},{"location":"plans/v3_0_0/#milestone-1-the-librarian-rag","title":"Milestone 1: The Librarian (RAG) \ud83d\udcda","text":"<ul> <li>[ ] Implement vault-wide text search in <code>VaultService</code>.</li> <li>[ ] Add <code>search_notes</code> tool to the MCP server.</li> <li>[ ] Update Agent prompt to use search for context beyond Anki stats.</li> </ul>"},{"location":"plans/v3_0_0/#milestone-2-agent-orchestration","title":"Milestone 2: Agent Orchestration \ud83c\udfad","text":"<ul> <li>[ ] Upgrade <code>server.py</code> to support multi-step tool chaining (ReAct loops).</li> <li>[ ] Implement Specialist \"sub-brains\" (Study Coach, Sync Architect).</li> <li>[ ] Verify the Orchestrator can handle complex, multi-tool queries.</li> </ul>"},{"location":"plans/v3_0_0/#milestone-3-deep-analytics-memory","title":"Milestone 3: Deep Analytics &amp; Memory \ud83e\udde0","text":"<ul> <li>[ ] Implement study history trends using direct SQLite access.</li> <li>[ ] Add persistent user learning profile for long-term goal tracking.</li> <li>[ ] Verify agent provides proactive advice based on 30-day trends.</li> </ul>"},{"location":"plans/v3_0_0/#milestone-4-operational-resilience","title":"Milestone 4: Operational Resilience \u2693","text":"<ul> <li>[ ] Implement <code>AtomicAgentHook</code> for sync monitoring and logging.</li> <li>[ ] Add intelligent retry logic for Anki database locking issues.</li> </ul>"},{"location":"plans/v3_0_0/#milestone-5-native-orchestration-vision","title":"Milestone 5: Native Orchestration &amp; Vision \ud83d\udc41\ufe0f","text":"<ul> <li>[ ] Refactor Orchestrator to use native Schema Union tool calling.</li> <li>[ ] [Experimental] Add Vision support to scan note diagrams for cards.</li> </ul>"},{"location":"plans/v3_0_0/#technical-architecture","title":"Technical Architecture","text":"<p>The Agentic Layer will be built on the Atomic Agents framework for orchestration and Letta (formerly MemGPT) for state and memory management.</p>"},{"location":"plans/v3_0_0/#core-stack","title":"Core Stack","text":"<ul> <li>Atomic Agents: Implementation of the ReAct loops, tool usage, and structured response generation.</li> <li>Letta: Long-term memory, user profile management, and context window optimization.</li> <li>Open MCP Server: A standardized implementation of the Model Context Protocol, allowing any MCP-compliant agent (Claude Desktop, custom scripts, etc.) to control Arete.</li> </ul>"},{"location":"plans/v3_0_0/#capabilities","title":"Capabilities","text":"<ul> <li>Universal Agent Support: Expose Arete's tools (search, queue building, stats) to external agents via MCP.</li> <li>Direct Database Access: Read-only access to Anki and Arete SQLite DBs.</li> <li>Log Stream: Real-time access to sync logs.</li> <li>Context Window Management: Smart summarization via Letta.</li> </ul>"},{"location":"walkthroughs/dependency-graph/","title":"Dependency Graph Feature \u2014 Walkthrough","text":"<p>Branch: <code>feature/dependency-graph</code></p>"},{"location":"walkthroughs/dependency-graph/#what-was-built","title":"What Was Built","text":"<p>This branch implements Milestones 2-3 of the v2.0.0 plan: Dependency Editing and Local Graph View.</p>"},{"location":"walkthroughs/dependency-graph/#python-layer","title":"Python Layer","text":""},{"location":"walkthroughs/dependency-graph/#graphpy","title":"graph.py","text":"<p>Domain types for dependency graphs: - <code>CardNode</code> \u2014 Represents a card with id, title, file path, line number - <code>DependencyGraph</code> \u2014 Nodes + requires/related edge maps - <code>LocalGraphResult</code> \u2014 Subgraph query result for UI</p>"},{"location":"walkthroughs/dependency-graph/#graph_resolverpy","title":"graph_resolver.py","text":"<p>Graph building and traversal: - <code>build_graph(vault_root)</code> \u2014 Parses all YAML frontmatter - <code>get_local_graph(card_id, depth)</code> \u2014 Returns subgraph centered on card - <code>detect_cycles()</code> \u2014 Uses stdlib graphlib - <code>topological_sort()</code> \u2014 For queue ordering</p>"},{"location":"walkthroughs/dependency-graph/#queue_builderpy","title":"queue_builder.py","text":"<p>Queue building algorithm: - Walk <code>requires</code> edges backward up to depth - Filter for weak prerequisites (low stability, lapses) - Topo sort for proper learning order - <code>include_related=True</code> raises <code>NotImplementedError</code> (future work)</p>"},{"location":"walkthroughs/dependency-graph/#test_graph_resolverpy","title":"test_graph_resolver.py","text":"<p>Comprehensive tests for graph building, local graph, cycles, topo sort, and queue building.</p>"},{"location":"walkthroughs/dependency-graph/#obsidian-layer","title":"Obsidian Layer","text":""},{"location":"walkthroughs/dependency-graph/#typests","title":"types.ts","text":"<p>TypeScript equivalents of Python types with <code>DependencyGraphBuilder</code> class.</p>"},{"location":"walkthroughs/dependency-graph/#dependencyresolverts","title":"DependencyResolver.ts","text":"<p>Obsidian-side resolver: - Parses vault YAML directly via Obsidian API - Builds and caches dependency graph - Invalidates on file modification</p>"},{"location":"walkthroughs/dependency-graph/#dependencyeditorviewts","title":"DependencyEditorView.ts","text":"<p>Sidebar panel: - Shows requires/related for current card - Add/remove dependencies via fuzzy search - Displays diagnostics (missing deps, cycles)</p>"},{"location":"walkthroughs/dependency-graph/#localgraphviewts","title":"LocalGraphView.ts","text":"<p>Graph visualization: - 3-column layout: Prerequisites \u2192 Center \u2192 Dependents - Toggle related cards visibility - Depth selector (1-4) - Click to navigate</p>"},{"location":"walkthroughs/dependency-graph/#cardsearchmodalts","title":"CardSearchModal.ts","text":"<p>Fuzzy search modal using Obsidian's <code>FuzzySuggestModal</code>.</p>"},{"location":"walkthroughs/dependency-graph/#next-steps-not-on-this-branch","title":"Next Steps (Not on this branch)","text":"<ol> <li> <p>Register views in main.ts:    <pre><code>this.registerView(DEPENDENCY_EDITOR_VIEW_TYPE, (leaf) =&gt; new DependencyEditorView(leaf, this));\nthis.registerView(LOCAL_GRAPH_VIEW_TYPE, (leaf) =&gt; new LocalGraphView(leaf, this));\n</code></pre></p> </li> <li> <p>Add ribbon icons and commands</p> </li> <li> <p>Test with real vault data containing cards with <code>id</code> and <code>deps</code> fields</p> </li> </ol>"},{"location":"walkthroughs/dependency-graph/#verification-results","title":"Verification Results","text":""},{"location":"walkthroughs/dependency-graph/#python-layer_1","title":"Python Layer","text":"<ul> <li>Unit Tests: 15 tests passed in 0.03s.</li> <li>Logic: Graph building, topological sorting, cycle detection, and weak prerequisite filtering.</li> <li>Command: <code>uv run pytest tests/application/test_graph_resolver.py</code></li> </ul>"},{"location":"walkthroughs/dependency-graph/#obsidian-layer_1","title":"Obsidian Layer","text":"<ul> <li>File Structure: All new components (<code>DependencyResolver</code>, <code>DependencyEditorView</code>, <code>LocalGraphView</code>, <code>CardSearchModal</code>) created and located in their respective directories.</li> <li>Integration: Views registered in <code>main.ts</code>, ribbon icons added, and commands mapped.</li> <li>Styling: New CSS rules added to <code>styles.css</code> for the three-column graph layout and editor panels.</li> </ul> Path Purpose <code>src/arete/domain/graph.py</code> Graph domain types <code>src/arete/application/graph_resolver.py</code> Graph building &amp; traversal <code>src/arete/application/queue_builder.py</code> Queue building algorithm <code>tests/application/test_graph_resolver.py</code> Python tests <code>obsidian-plugin/src/domain/graph/types.ts</code> TypeScript types <code>obsidian-plugin/src/application/services/DependencyResolver.ts</code> YAML parsing <code>obsidian-plugin/src/presentation/views/DependencyEditorView.ts</code> Editor panel <code>obsidian-plugin/src/presentation/views/LocalGraphView.ts</code> Graph view <code>obsidian-plugin/src/presentation/modals/CardSearchModal.ts</code> Search modal <code>obsidian-plugin/styles.css</code> CSS additions"}]}