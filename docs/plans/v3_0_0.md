# Arete v3.0.0 ‚Äî The Agentic Layer
*"An intelligent interface that understands your capabilities."*

---

## Core Vision
Arete v3 shifts from being a "dumb" sync tool to an intelligent study partner. It sits on top of the robust v2 Python core and orchestrates it to help the user learn more effectively.

**Key Capabilities:**
1.  **Orchestrator Pattern**: The Agent can chain multiple tools (Search ‚Üí Analyze ‚Üí Queue) to solve complex user requests.
2.  **RAG (The Librarian)**: Full semantic understanding of the vault, not just Anki stats.
3.  **Specialist Sub-Brains**: Dedicated modules for "Study Coaching", "Sync Architecture", and "Data Analytics".
4.  **Vision**: Ability to "see" diagrams and images on cards to generate questions or check quality.

---

## Roadmap

### Milestone 1: The Librarian (RAG) üìö
- [ ] Implement vault-wide text search in `VaultService`.
- [ ] Add `search_notes` tool to the MCP server.
- [ ] Update Agent prompt to use search for context beyond Anki stats.

### Milestone 2: Agent Orchestration üé≠
- [ ] Upgrade `server.py` to support multi-step tool chaining (ReAct loops).
- [ ] Implement Specialist "sub-brains" (Study Coach, Sync Architect).
- [ ] Verify the Orchestrator can handle complex, multi-tool queries.

### Milestone 3: Deep Analytics & Memory üß†
- [ ] Implement study history trends using direct SQLite access.
- [ ] Add persistent user learning profile for long-term goal tracking.
- [ ] Verify agent provides proactive advice based on 30-day trends.

### Milestone 4: Operational Resilience ‚öì
- [ ] Implement `AtomicAgentHook` for sync monitoring and logging.
- [ ] Add intelligent retry logic for Anki database locking issues.

### Milestone 5: Native Orchestration & Vision üëÅÔ∏è
- [ ] Refactor Orchestrator to use native Schema Union tool calling.
- [ ] [Experimental] Add Vision support to scan note diagrams for cards.

---

## Technical Architecture
The Agentic Layer will be built on the **Atomic Agents** framework for orchestration and **Letta** (formerly MemGPT) for state and memory management.

### Core Stack
- **Atomic Agents**: Implementation of the ReAct loops, tool usage, and structured response generation.
- **Letta**: Long-term memory, user profile management, and context window optimization.
- **Open MCP Server**: A standardized implementation of the Model Context Protocol, allowing *any* MCP-compliant agent (Claude Desktop, custom scripts, etc.) to control Arete.

### Capabilities
- **Universal Agent Support**: Expose Arete's tools (search, queue building, stats) to external agents via MCP.
- **Direct Database Access**: Read-only access to Anki and Arete SQLite DBs.
- **Log Stream**: Real-time access to sync logs.
- **Context Window Management**: Smart summarization via Letta.
